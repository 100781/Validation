<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <title>Respect\Validation</title>

        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">
        <link rel="stylesheet" href="http://respect.github.io/Validation/css/main.css">
    </head>
    <body>

        <header class="navbar navbar-default navbar-fixed-top">

            <a class="navbar-brand" href="http://respect.github.io/Validation/">
                Respect\Validation
                <small class="hidden-xs hidden-sm">
                    The most awesome validation engine ever created for PHP
                </small>
            </a>

                            <a href="https://github.com/Respect/Validation">
                    <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png">
                </a>
            
        </header>

        <main class="container-fluid">
            <div class="row">
                                    <nav id="sidebar" class="col-sm-3 col-lg-2" role="navigation">

                        
                            
                            <ul class="nav nav-pills nav-stacked">
                                                                    <li class="">
                                        <a href="http://respect.github.io/Validation/">
                                            Home
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://respect.github.io/Validation/contributing.html">
                                            Contributing
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://respect.github.io/Validation/docs/">
                                            Feature Guide
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://respect.github.io/Validation/docs/install.html">
                                            Installation
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://respect.github.io/Validation/license.html">
                                            License
                                        </a>
                                    </li>
                                                                    <li class="">
                                        <a href="http://respect.github.io/Validation/docs/validators.html">
                                            Validators
                                        </a>
                                    </li>
                                                            </ul>

                        
                    </nav>
                
                <section class="col-sm-offset-3 col-lg-offset-2 col-sm-9 col-lg-10">
                    <h1 id="feature-guide">Feature Guide</h1>
<h2 id="namespace-import">Namespace import</h2>
<p>Respect\Validation is namespaced, but you can make your life easier by importing
a single class into your context:</p>
<pre><code class="language-php">use Respect\Validation\Validator as v;</code></pre>
<h2 id="simple-validation">Simple validation</h2>
<p>The Hello World validator is something like this:</p>
<pre><code class="language-php">$number = 123;
v::numeric()-&gt;validate($number); // true</code></pre>
<h2 id="chained-validation">Chained validation</h2>
<p>It is possible to use validators in a chain. Sample below validates a string
containing numbers and letters, no whitespace and length between 1 and 15.</p>
<pre><code class="language-php">$usernameValidator = v::alnum()-&gt;noWhitespace()-&gt;length(1, 15);
$usernameValidator-&gt;validate('alganet'); // true</code></pre>
<h2 id="validating-object-attributes">Validating object attributes</h2>
<p>Given this simple object:</p>
<pre><code class="language-php">$user = new stdClass;
$user-&gt;name = 'Alexandre';
$user-&gt;birthdate = '1987-07-01';</code></pre>
<p>Is possible to validate its attributes in a single chain:</p>
<pre><code class="language-php">$userValidator = v::attribute('name', v::stringType()-&gt;length(1,32))
                  -&gt;attribute('birthdate', v::date()-&gt;age(18));

$userValidator-&gt;validate($user); // true</code></pre>
<p>Validating array keys is also possible using <code>v::key()</code></p>
<p>Note that we used <code>v::stringType()</code> and <code>v::date()</code> in the beginning of the validator.
Although is not mandatory, it is a good practice to use the type of the
validated object as the first node in the chain.</p>
<h2 id="input-optional">Input optional</h2>
<p>On oldest versions of Respect\Validation all validators treat input as optional
and accept an empty string input as valid. Even though a useful feature that
caused a lot of troubles for our team and neither was an obvious behavior. Also
there was some people who likes to accept <code>null</code> as optional value, not only an
empty string.</p>
<p>For that reason all rules are mandatory now but if you want to treat a value as
optional you can use <code>v::optional()</code> rule:</p>
<pre><code class="language-php">v::alpha()-&gt;validate(''); // false input required
v::alpha()-&gt;validate(null); // false input required

v::optional(v::alpha())-&gt;validate(''); // true
v::optional(v::alpha())-&gt;validate(null); // true</code></pre>
<p>By <em>optional</em> we consider <code>null</code> or an empty string (<code>''</code>).</p>
<p>See more on <a href="optional.html">Optional</a>.</p>
<h2 id="negating-rules">Negating rules</h2>
<p>You can use the <code>v::not()</code> to negate any rule:</p>
<pre><code class="language-php">v::not(v::intVal())-&gt;validate(10); // false, input must not be integer</code></pre>
<h2 id="validator-reuse">Validator reuse</h2>
<p>Once created, you can reuse your validator anywhere. Remember <code>$usernameValidator</code>?</p>
<pre><code class="language-php">$usernameValidator-&gt;validate('respect');            //true
$usernameValidator-&gt;validate('alexandre gaigalas'); // false
$usernameValidator-&gt;validate('#$%');                //false</code></pre>
<h2 id="exception-types">Exception types</h2>
<ul>
<li><code>Repect\Validation\Exceptions\ExceptionInterface</code>:
<ul>
<li>All exceptions implement this interface;</li>
</ul></li>
<li><code>Respect\Validation\Exceptions\ValidationException</code>:
<ul>
<li>Implements the <code>Repect\Validation\Exceptions\ExceptionInterface</code> interface</li>
<li>Thrown when the <code>check()</code> fails</li>
<li>All validation exceptions extend this class</li>
<li>Available methods:
<ul>
<li><code>getMainMessage()</code>;</li>
<li><code>setMode($mode)</code>;</li>
<li><code>setName($name)</code>;</li>
<li><code>setParam($name, $value)</code>;</li>
<li><code>setTemplate($template)</code>;</li>
<li>more...</li>
</ul></li>
</ul></li>
<li><code>Respect\Validation\Exceptions\NestedValidationException</code>:
<ul>
<li>Extends the <code>Respect\Validation\Exceptions\ValidationException</code> class</li>
<li>Usually thrown when the <code>assert()</code> fails</li>
<li>Available methods:
<ul>
<li><code>findMessages()</code>;</li>
<li><code>getFullMessage()</code>;</li>
<li><code>getMessages()</code>;</li>
<li>more...</li>
</ul></li>
</ul></li>
</ul>
<h2 id="informative-exceptions">Informative exceptions</h2>
<p>When something goes wrong, Validation can tell you exactly what's going on. For this,
we use the <code>assert()</code> method instead of <code>validate()</code>:</p>
<pre><code class="language-php">use Respect\Validation\Exceptions\NestedValidationException;

try {
    $usernameValidator-&gt;assert('really messed up screen#name');
} catch(NestedValidationException $exception) {
   echo $exception-&gt;getFullMessage();
}</code></pre>
<p>The printed message is exactly this, as a nested Markdown list:</p>
<pre><code class="language-no-highlight">- All of the required rules must pass for "really messed up screen#name"
  - "really messed up screen#name" must contain only letters (a-z) and digits (0-9)
  - "really messed up screen#name" must not contain whitespace
  - "really messed up screen#name" must have a length between 1 and 15</code></pre>
<h2 id="getting-all-messages-as-an-array">Getting all messages as an array</h2>
<p>The Markdown list is fine, but unusable on a HTML form or something more custom.
For that you can use <code>getMessages()</code>.</p>
<p>It will return all messages from the rules that did not pass the validation.</p>
<pre><code class="language-php">try {
    $usernameValidator-&gt;assert('really messed up screen#name');
} catch(NestedValidationException $exception) {
    print_r($exception-&gt;getMessages());
}</code></pre>
<p>The code above may display something like:</p>
<pre><code class="language-no-highlight">Array
(
    [0] =&gt; "really messed up screen#name" must contain only letters (a-z) and digits (0-9)
    [1] =&gt; "really messed up screen#name" must not contain whitespace
    [2] =&gt; "really messed up screen#name" must have a length between 1 and 15
)</code></pre>
<h2 id="getting-messages-as-an-array-by-name">Getting messages as an array by name</h2>
<p>If you want to get specific message by name you can use <code>findMessages()</code> passing
the names of the rules you want:</p>
<pre><code class="language-php">try {
    $usernameValidator-&gt;assert('really messed up screen#name');
} catch(NestedValidationException $exception) {
    print_r($exception-&gt;findMessages(['alnum', 'noWhitespace']));
}</code></pre>
<p>The <code>findMessages()</code> returns an array with messages from the requested validators,
like this:</p>
<pre><code class="language-no-highlight">Array
(
    [alnum] =&gt; "really messed up screen#name" must contain only letters (a-z) and digits (0-9)
    [noWhitespace] =&gt; "really messed up screen#name" must not contain whitespace
)</code></pre>
<h2 id="custom-messages">Custom messages</h2>
<p>Getting messages as an array is fine, but sometimes you need to customize them in order
to present them to the user. This is possible using the <code>findMessages()</code> method as well:</p>
<pre><code class="language-php">$errors = $exception-&gt;findMessages([
    'alnum' =&gt; '{{name}} must contain only letters and digits',
    'length' =&gt; '{{name}} must not have more than 15 chars',
    'noWhitespace' =&gt; '{{name}} cannot contain spaces'
]);</code></pre>
<p>For all messages, the <code>{{name}}</code> variable is available for templates. If you
do not define a name it uses the input to replace this placeholder.</p>
<h2 id="message-localization">Message localization</h2>
<p>You're also able to translate your message to another language with Validation.
The only thing one must do is to define the param <code>translator</code> as a callable that
will handle the translation:</p>
<pre><code class="language-php">$exception-&gt;setParam('translator', 'gettext');</code></pre>
<p>The example above uses <code>gettext()</code> but you can use any other callable value, like
<code>[$translator, 'trans']</code> or <code>you_custom_function()</code>.</p>
<p>After that, if you call <code>getMainMessage()</code> or <code>getFullMessage()</code> (for nested),
the message will be translated.</p>
<p>Note that <code>getMessage()</code> will keep the original message.</p>
<h2 id="custom-rules">Custom rules</h2>
<p>You also can use your own rules:</p>
<pre><code class="language-php">namespace My\Validation\Rules;

use Respect\Validation\Rules\AbstractRule;

class MyRule extends AbstractRule
{
    public function validate($input)
    {
        // Do something here with the $input and return a boolean value
    }
}</code></pre>
<p>If you do want Validation to execute you rule (or rules) in the chain, you must
use <code>v::with()</code> passing your rule's namespace as an argument:</p>
<pre><code class="language-php">v::with('My\\Validation\\Rules\\');
v::myRule(); // Try to load "My\Validation\Rules\MyRule" if any</code></pre>
<p>By default <code>with()</code> appends the given prefix, but you can change this behavior
in order to overwrite default rules:</p>
<pre><code class="language-php">v::with('My\\Validation\\Rules\\', true);
v::alnum(); // Try to use "My\Validation\Rules\Alnum" if any</code></pre>
<h2 id="validator-name">Validator name</h2>
<p>On <code>v::attribute()</code> and <code>v::key()</code>, <code>{{name}}</code> is the attribute/key name. For others,
is the same as the input. You can customize a validator name using:</p>
<pre><code class="language-php">v::date('Y-m-d')-&gt;between('1980-02-02', 'now')-&gt;setName('Member Since');</code></pre>
<h2 id="zendsymfony-validators">Zend/Symfony validators</h2>
<p>It is also possible to reuse validators from other frameworks if they are installed:</p>
<pre><code class="language-php">$hostnameValidator = v::zend('Hostname')-&gt;assert('google.com');
$timeValidator     = v::sf('Time')-&gt;assert('22:00:01');</code></pre>
<h2 id="validation-methods">Validation methods</h2>
<p>We've seen <code>validate()</code> that returns true or false and <code>assert()</code> that throws a complete
validation report. There is also a <code>check()</code> method that returns an Exception
only with the first error found:</p>
<pre><code class="language-php">use Respect\Validation\Exceptions\ValidationException;

try {
    $usernameValidator-&gt;check('really messed up screen#name');
} catch(ValidationException $exception) {
    echo $exception-&gt;getMainMessage();
}</code></pre>
<p>Message:</p>
<pre><code class="language-no-highlight">"really messed up screen#name" must contain only letters (a-z) and digits (0-9)</code></pre>
<hr />
<p>See also:</p>
<ul>
<li><a href="../contributing.html">Contributing</a></li>
<li><a href="install.html">Installation</a></li>
<li><a href="../license.html">License</a></li>
<li><a href="validators.html">Validators</a></li>
<li><a href="../changelog.html">Changelog</a></li>
</ul>
                    <div id="go-top">
                        <hr />
                        <p>
                            <a class="btn btn-primary btn-sm" href="#" role="button">
                                <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
                            </a>
                        </p>
                    </div>
                </section>
            </div>
        </main>

        <script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>

        <script>
            $(function() {
                hljs.initHighlightingOnLoad();

                var top = $('#go-top');

                $(window).scroll(function() {
                    if($(window).scrollTop() + $(window).height() <= $(document).height() - 100) {
                        return;
                    }

                    top.fadeIn();
                });
            });

            
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', 'UA-59839366-1', 'auto');
                ga('send', 'pageview');

            
        </script>
    </body>
</html>
